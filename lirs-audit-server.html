<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-29T11:08:57.494309"><meta name="build-number" content="${buildNumber}">       <title>Devops | Trigital Official Handbook</title><script id="virtual-toc-data" type="application/json">[{"id":"table-of-content","level":0,"title":"Table Of Content","anchor":"#table-of-content"},{"id":"details","level":0,"title":"Details","anchor":"#details"},{"id":"aws","level":1,"title":"AWS","anchor":"#aws"},{"id":"backups-online-offline","level":1,"title":"Backups Online/Offline","anchor":"#backups-online-offline"},{"id":"alerts","level":1,"title":"Alerts","anchor":"#alerts"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Devops | Trigital Official Handbook"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Trigital Official Handbook Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="lirs-audit-server.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Devops | Trigital Official Handbook"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "lirs-audit-server.html#webpage", "url": "lirs-audit-server.html", "name": "Devops | Trigital Official Handbook", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "Trigital Official Handbook Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="Lirs-Audit-Server" data-main-title="Devops" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs=""  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Trigital Official Handbook  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Lirs-Audit-Server"  id="Lirs-Audit-Server.md"  >Devops</h1>  <section class="chapter"><h2 id="table-of-content" data-toc="table-of-content">Table Of Content</h2><ul class="list _ul" id="b0339866_144837"    ><li class="list__item" id="b0339866_144838"><p><a href="#aws" id="b0339866_144839" data-tooltip="AWS Guide"  >AWS</a></p><ul class="list _ul" id="b0339866_144840"    ><li class="list__item" id="b0339866_144841"><p><a href="#iam_login" id="b0339866_144842" data-tooltip="IAM Login Rules"  >IAM Login</a></p></li><li class="list__item" id="b0339866_144843"><p><a href="#service_iam_role_permission" id="b0339866_144844" data-tooltip="Roles and permission guide"  >Service IAM Roles and Permission</a></p></li><li class="list__item" id="b0339866_144845"><p><a href="#green_blue_deployment" id="b0339866_144846" data-tooltip="Deployment Process"  >Green Blue Deployment</a></p></li><li class="list__item" id="b0339866_144847"><p><a href="#auto_scaling_rules" id="b0339866_144848" data-tooltip="Autoscaling rules"  >Auto Scaling Rules</a></p></li><li class="list__item" id="b0339866_144849"><p><a href="#vps_based_restriction" id="b0339866_144850" data-tooltip="Networking guide for security and monitoring"  >VPS Based restriction</a></p></li><li class="list__item" id="b0339866_144851"><p><a href="#secrets_management" id="b0339866_144852" data-tooltip="Rules to Follow when handing secrets"  >Secrets Management</a></p></li><li class="list__item" id="b0339866_144853"><p><a href="#logging" id="b0339866_144854" data-tooltip="Record everything, obviously except secret info"  >Logging</a></p></li><li class="list__item" id="b0339866_144855"><p><a href="#encryption" id="b0339866_144856" data-tooltip="Secret stays secret"  >Encryption</a></p></li><li class="list__item" id="b0339866_144857"><p><a href="#monitoring" id="b0339866_144858" data-tooltip="Nothing goes unseen"  >Monitoring</a></p></li></ul></li><li class="list__item" id="b0339866_144859"><p><a href="#backups-online-offline" id="b0339866_144860" data-tooltip="Backups Guide"  >Backups Online/Offline</a></p><ul class="list _ul" id="b0339866_144861"    ><li class="list__item" id="b0339866_144862"><p><a href="#etcd" id="b0339866_144863" data-tooltip="Heart of the kubernetes systems"  >ETCD</a></p></li><li class="list__item" id="b0339866_144864"><p><a href="#snapshot_ebs_volume" id="b0339866_144865" data-tooltip="Might need it for security audit"  >Snapshot EBS Volumes</a></p></li><li class="list__item" id="b0339866_144866"><p><a href="#database" id="b0339866_144867" data-tooltip="Database Backup obviously"  >Database</a></p></li><li class="list__item" id="b0339866_144868"><p><a href="#files" id="b0339866_144869" data-tooltip="S3 is reliable but why take the chance, a buggy script might delete entire directory"  >Files</a></p></li></ul></li><li class="list__item" id="b0339866_144870"><p><a href="#alerts" id="b0339866_144871" data-tooltip="Alerts Guide"  >Alerts</a></p><ul class="list _ul" id="b0339866_144872"    ><li class="list__item" id="b0339866_144873"><p><a href="#cost" id="b0339866_144874" data-tooltip="Monitor cost"  >Cost</a></p></li><li class="list__item" id="b0339866_144875"><p><a href="#service_failure" id="b0339866_144876" data-tooltip="Be the first one to know when services goes poof"  >Service Failure</a></p></li><li class="list__item" id="b0339866_144877"><p><a href="#action_failure" id="b0339866_144878" data-tooltip="Things need to happen, if they don't get it fixed"  >Actions Failure</a></p></li><li class="list__item" id="b0339866_144879"><p><a href="#request_rejection" id="b0339866_144880" data-tooltip="No one likes bunch of 5XX or 4XX"  >Request Rejection</a></p></li></ul></li></ul></section><section class="chapter"><h2 id="details" data-toc="details">Details</h2><section class="chapter"><h3 id="aws" data-toc="aws">AWS</h3><ol class="list _decimal" id="b0339866_144881"  type="1"  ><li class="list__item" id="iam_login"><p><span class="control" id="b0339866_144882">IAM Login</span></p><ul class="list _ul" id="b0339866_144883"    ><li class="list__item" id="b0339866_144884"><p>Create Role specific accounts for each developer and devops instead of full access</p></li><li class="list__item" id="b0339866_144885"><p>Recommended roles </p><ul class="list _ul" id="b0339866_144886"    ><li class="list__item" id="b0339866_144887"><p>Devops (Full access)</p></li><li class="list__item" id="b0339866_144888"><p>Developer (Kubernetes &amp; S3)</p></li><li class="list__item" id="b0339866_144889"><p>Auditor (Cloudtrail &amp; Cloudwatch)</p></li></ul></li></ul></li><li class="list__item" id="service_iam_role_permission"><p><span class="control" id="b0339866_144890">Service IAM Roles and Permission</span></p><ul class="list _ul" id="b0339866_144891"    ><li class="list__item" id="b0339866_144892"><p>Use AWS Identity and Access Management (IAM) roles and policies to control access to AWS services.</p></li><li class="list__item" id="b0339866_144893"><p>Follow the principle of least privilege, granting only the permissions necessary for specific tasks.</p></li></ul></li><li class="list__item" id="green_blue_deployment"><p><span class="control" id="b0339866_144894">Green Blue Deployment</span></p><ul class="list _ul" id="b0339866_144895"    ><li class="list__item" id="b0339866_144896"><p>Apart from dev instance make sure green blue deployments are in place to avoid full service failure in case of faulty deployment</p></li><li class="list__item" id="b0339866_144897"><p>Readiness Probe integration</p></li><li class="list__item" id="b0339866_144898"><p>Healthcheck Probe integration</p></li></ul></li><li class="list__item" id="auto_scaling_rules"><p><span class="control" id="b0339866_144899">Auto Scaling Rules</span></p><ul class="list _ul" id="b0339866_144900"    ><li class="list__item" id="b0339866_144901"><p>Service like mongodb, kubernetes nodes, redis should be configured for auto scaling or alert system in case of service overload.</p></li></ul></li><li class="list__item" id="vps_based_restriction"><p><span class="control" id="b0339866_144902">VPS Based restriction</span></p><ul class="list _ul" id="b0339866_144903"    ><li class="list__item" id="b0339866_144904"><p>Leverage Virtual Private Cloud (VPC) security groups and network ACLs to control inbound and outbound traffic.</p></li><li class="list__item" id="b0339866_144905"><p>Implement AWS WAF (Web Application Firewall) for application layer security.</p></li><li class="list__item" id="b0339866_144906"><p>Services which need tight integration with VPC and ACLs </p><ul class="list _ul" id="b0339866_144907"    ><li class="list__item" id="b0339866_144908"><p>EC2</p></li><li class="list__item" id="b0339866_144909"><p>Lambda</p></li><li class="list__item" id="b0339866_144910"><p>Mongodb Atlas</p></li><li class="list__item" id="b0339866_144911"><p>Cloudfront</p></li></ul></li></ul></li><li class="list__item" id="secrets_management"><p><span class="control" id="b0339866_144912">Secrets Management:</span></p><ul class="list _ul" id="b0339866_144913"    ><li class="list__item" id="b0339866_144914"><p>Store sensitive information in AWS Secrets Manager or AWS Key Management Service (KMS).</p></li><li class="list__item" id="b0339866_144915"><p>Kind of secretes which need to be secured </p><ul class="list _ul" id="b0339866_144916"    ><li class="list__item" id="b0339866_144917"><p>Api/Secret keys (third party services like payment gateway, sms provider, email provider, webhook callback verification keys etc.)</p></li><li class="list__item" id="b0339866_144918"><p>JWT signing key</p></li><li class="list__item" id="b0339866_144919"><p>Secretes signing key</p></li><li class="list__item" id="b0339866_144920"><p>Service to service communication key</p></li></ul></li></ul></li><li class="list__item" id="logging"><p><span class="control" id="b0339866_144921">Logging:</span></p><ul class="list _ul" id="b0339866_144922"    ><li class="list__item" id="b0339866_144923"><p>Enable AWS CloudTrail to log API calls and monitor for unauthorized activity.</p></li><li class="list__item" id="b0339866_144924"><p>Utilize centralized logging with tools like Amazon CloudWatch Logs or external solutions.</p></li></ul></li><li class="list__item" id="encryption"><p><span class="control" id="b0339866_144925">Encryption</span></p><ul class="list _ul" id="b0339866_144926"    ><li class="list__item" id="b0339866_144927"><p>For Sensitive Operations Use AWS KMS instead of making use of own implementation.</p></li></ul></li><li class="list__item" id="monitoring"><p><span class="control" id="b0339866_144928">Monitoring</span></p><ul class="list _ul" id="b0339866_144929"    ><li class="list__item" id="b0339866_144930"><p>CloudWatch </p><ul class="list _ul" id="b0339866_144931"    ><li class="list__item" id="b0339866_144932"><p>Set up CloudWatch Alarms to monitor critical Kubernetes metrics (CPU, memory, etc.).</p></li><li class="list__item" id="b0339866_144933"><p>Monitor EC2 instance metrics and other relevant AWS services.</p></li></ul></li><li class="list__item" id="b0339866_144934"><p>Kubernetes Dashboard </p><ul class="list _ul" id="b0339866_144935"    ><li class="list__item" id="b0339866_144936"><p>Deploy and use the Kubernetes dashboard for real-time monitoring of cluster.</p></li></ul></li></ul></li></ol></section><section class="chapter"><h3 id="backups-online-offline" data-toc="backups-online-offline">Backups Online/Offline</h3><ol class="list _decimal" id="b0339866_144937"  type="1"  ><li class="list__item" id="etcd"><p>ETCD </p><ul class="list _ul" id="b0339866_144938"    ><li class="list__item" id="b0339866_144939"><p>Regularly backup the etcd database, which stores Kubernetes cluster state.</p></li><li class="list__item" id="b0339866_144940"><p>Use tools like Velero for cluster-wide backups.</p></li></ul></li><li class="list__item" id="snapshot_ebs_volume"><p>Snapshot EBS Volumes </p><ul class="list _ul" id="b0339866_144941"    ><li class="list__item" id="b0339866_144942"><p>Take regular snapshots of EBS volumes attached to worker nodes.</p></li></ul></li><li class="list__item" id="database"><p>Database </p><ul class="list _ul" id="b0339866_144943"    ><li class="list__item" id="b0339866_144944"><p>Automated HOT backups of database.</p></li><li class="list__item" id="b0339866_144945"><p>Off-site backup</p></li></ul></li><li class="list__item" id="files"><p>Files </p><ul class="list _ul" id="b0339866_144946"    ><li class="list__item" id="b0339866_144947"><p>Regular Off-site S3 backup</p></li></ul></li></ol></section><section class="chapter"><h3 id="alerts" data-toc="alerts">Alerts</h3><ol class="list _decimal" id="b0339866_144948"  type="1"  ><li class="list__item" id="cost"><p>Cost </p><ul class="list _ul" id="b0339866_144949"    ><li class="list__item" id="b0339866_144950"><p>Raise alert when bill is higher than limit configured in aws billing.</p></li></ul></li><li class="list__item" id="service_failure"><p>Service Failure </p><ul class="list _ul" id="b0339866_144951"    ><li class="list__item" id="b0339866_144952"><p>Services like ec2<a href="#cost" id="b0339866_144953" data-tooltip="Yup this is a TVA Official Handbook Reference"  >,</a> mongodb connectivity, kubernetes node failure.</p></li></ul></li><li class="list__item" id="action_failure"><p>Actions Failure </p><ul class="list _ul" id="b0339866_144954"    ><li class="list__item" id="b0339866_144955"><p>Lambda, Cron, KMS, SSL Renew (Lets encrypt).</p></li></ul></li><li class="list__item" id="request_rejection"><p>Request Rejection </p><ul class="list _ul" id="b0339866_144956"    ><li class="list__item" id="b0339866_144957"><p>When there is unusually high amount of 5XX and 4XX request.</p></li></ul></li><li class="list__item" id="scaling_failure"><p>Scaling Failure </p><ul class="list _ul" id="b0339866_144958"    ><li class="list__item" id="b0339866_144959"><p>Auto-scale failure in case of increasing or decreasing instances</p></li></ul></li></ol><aside class="prompt" data-type="tip" data-title="" id="b0339866_144960"><p id="b0339866_144961">Set up CloudWatch Alarms to notify you when specific thresholds are breached.</p></aside><aside class="prompt" data-type="tip" data-title="" id="b0339866_144962"><p id="b0339866_144963">Remember to keep all components, including the Kubernetes version, AWS services, and third-party tools, up to date to benefit from security patches and improvements. Regularly review and update security measures based on changes in your application and infrastructure.</p></aside></section></section><div class="last-modified"> Last modified: 29 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">   <a class="navigation-links__next" href="services.html">Services</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>